BOOTSTRAP: docker
FROM: debian:12.1

%post
################################# APT INSTALL #################################
apt-get update
apt-get install -y python3-pip git zsh
###############################################################################

################################# PYTORCH #################################
pip3 install --break-system-packages torch torchvision torchaudio
###########################################################################

################################# PIP PACKAGES ############################
pip3 install --break-system-packages biopython matplotlib scipy \
                   pandas seaborn tqdm networkx scikit-image scikit-learn termcolor dill \
                   adjustText jax jaxlib clipkit
###########################################################################

########################## ALIGNSCAPE #####################################
cd /usr/local/lib/python3.11/dist-packages \
    && git clone https://github.com/bougui505/alignscape.git \
    && cd /usr/local/bin \
    && ln -s /usr/local/lib/python3.11/dist-packages/alignscape/align_scape.py align_scape \
    && ln -s /usr/local/lib/python3.11/dist-packages/alignscape/plot_umat.py plot_umat
###########################################################################

############################ QUICKSOM #####################################
cd /usr/local/lib/python3.11/dist-packages/alignscape \
    && git clone https://github.com/bougui505/quicksom.git
###########################################################################
